<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <meta name="theme-color" content="#FF9F1C">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="images/logo.png">
    
    <title>Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø·Ø¹Ø§Ù… | ÙˆØ§Ùˆ Ø¨Ø´Ø§Ù…ÙŠÙ„</title>
    <link rel="icon" type="image/png" href="images/logo.png">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    
    <style>
        body { font-family: 'Tajawal', sans-serif; background-color: #f8fafc; padding-bottom: 100px; scroll-behavior: smooth; }
        
        /* SEARCH BAR */
        .search-container { position: sticky; top: 70px; z-index: 35; background: #f8fafc; padding: 10px 15px; transition: 0.3s; }
        .search-box { position: relative; width: 100%; }
        .search-input { width: 100%; background: white; border: 1px solid #e2e8f0; border-radius: 15px; padding: 12px 45px 12px 15px; font-size: 14px; box-shadow: 0 4px 10px rgba(0,0,0,0.03); outline: none; transition: 0.3s; }
        .search-input:focus { border-color: #FF9F1C; box-shadow: 0 4px 15px rgba(255, 159, 28, 0.15); }
        .search-icon { position: absolute; top: 50%; right: 15px; transform: translateY(-50%); color: #9ca3af; }
        html[dir="ltr"] .search-input { padding: 12px 15px 12px 45px; }
        html[dir="ltr"] .search-icon { right: auto; left: 15px; }

        /* FAVORITE HEART */
        .fav-btn-card { position: absolute; top: 10px; right: 10px; width: 30px; height: 30px; background: rgba(255,255,255,0.9); border-radius: 50%; display: flex; align-items: center; justify-content: center; z-index: 10; cursor: pointer; box-shadow: 0 2px 5px rgba(0,0,0,0.1); transition: 0.2s; color: #9ca3af; }
        html[dir="ltr"] .fav-btn-card { right: auto; left: 10px; }
        .fav-btn-card.active { color: #ef4444; transform: scale(1.1); }
        .fav-btn-card.active i { font-weight: 900; }

        /* GENERAL STYLES */
        .marquee-strip { background: #FFF7ED; overflow: hidden; white-space: nowrap; padding: 8px 0; border-bottom: 1px solid #FFEDD5; }
        .marquee-content { display: inline-block; animation: scrollLeft 30s linear infinite; }
        .marquee-item { display: inline-flex; align-items: center; gap: 5px; margin: 0 20px; font-size: 12px; font-weight: bold; color: #9A3412; }
        @keyframes scrollLeft { 0% { transform: translateX(0); } 100% { transform: translateX(50%); } }
        
        .slider-container { position: relative; width: 100%; overflow: hidden; padding: 10px 0; }
        .slider-track { display: flex; gap: 15px; overflow-x: auto; scroll-behavior: smooth; padding: 0 15px; scrollbar-width: none; }
        .slider-track::-webkit-scrollbar { display: none; }
        .offer-card { flex: 0 0 85%; height: 160px; border-radius: 18px; overflow: hidden; position: relative; box-shadow: 0 4px 10px rgba(0,0,0,0.05); }
        @media (min-width: 768px) { .offer-card { flex: 0 0 40%; height: 220px; } }
        .offer-card img { width: 100%; height: 100%; object-fit: cover; }
        
        .sticky-cats { position: sticky; top: 0; z-index: 40; background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(10px); box-shadow: 0 4px 20px rgba(0,0,0,0.05); padding: 10px 0; border-bottom: 1px solid #f1f5f9; }
        .cat-scroll { display: flex; overflow-x: auto; gap: 15px; padding: 0 15px; scrollbar-width: none; }
        .cat-item { display: flex; flex-direction: column; align-items: center; gap: 5px; cursor: pointer; transition: 0.3s; opacity: 0.7; min-width: 60px; }
        .cat-item.active { opacity: 1; transform: scale(1.05); }
        .cat-circle { width: 55px; height: 55px; border-radius: 50%; overflow: hidden; border: 2px solid transparent; transition: 0.3s; background: #f1f5f9; display: flex; align-items: center; justify-content: center; }
        .cat-item.active .cat-circle { border-color: #FF9F1C; box-shadow: 0 4px 12px rgba(255, 159, 28, 0.3); }
        .cat-circle img { width: 100%; height: 100%; object-fit: cover; }
        .cat-name { font-size: 11px; font-weight: bold; color: #4b5563; white-space: nowrap; }
        
        .menu-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; padding: 15px; }
        @media (min-width: 640px) { .menu-grid { grid-template-columns: repeat(3, 1fr); } }
        .menu-item { background: white; border-radius: 20px; overflow: hidden; box-shadow: 0 4px 15px rgba(0,0,0,0.03); border: 1px solid #f1f5f9; display: flex; flex-direction: column; position: relative; transition: transform 0.2s; }
        .menu-item:active { transform: scale(0.98); }
        .menu-img-box { position: relative; padding-top: 75%; overflow: hidden; }
        .menu-img { position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover; }
        
        .info-strip { display: flex; gap: 5px; padding: 0 10px; margin-top: -12px; position: relative; z-index: 5; }
        .cal-badge { background: #fff; border: 1px solid #fee2e2; color: #ef4444; font-size: 9px; font-weight: bold; padding: 3px 6px; border-radius: 6px; display: flex; align-items: center; gap: 3px; box-shadow: 0 2px 4px rgba(0,0,0,0.05); }
        .allergen-icon { width: 22px; height: 22px; background: #f0f9ff; border: 1px solid #e0f2fe; color: #0284c7; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 11px; box-shadow: 0 2px 4px rgba(0,0,0,0.05); }
        
        /* MODALS */
        .modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.6); z-index: 100; opacity: 0; pointer-events: none; transition: opacity 0.3s; display: flex; align-items: center; justify-content: center; backdrop-filter: blur(5px); }
        .modal-overlay.active { opacity: 1; pointer-events: auto; }
        .product-modal { background: white; width: 90%; max-width: 450px; border-radius: 25px; overflow: hidden; transform: scale(0.9); transition: transform 0.3s; box-shadow: 0 25px 50px -12px rgba(0,0,0,0.25); position: relative; display: flex; flex-direction: column; max-height: 90vh; }
        .modal-overlay.active .product-modal { transform: scale(1); }
        .modal-close { position: absolute; top: 15px; right: 15px; width: 35px; height: 35px; background: rgba(0,0,0,0.1); border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: pointer; z-index: 10; color: #4b5563; }
        html[dir="ltr"] .modal-close { right: auto; left: 15px; }
        .modal-img-box { width: 100%; height: 220px; background: #f8fafc; display: flex; align-items: center; justify-content: center; flex-shrink: 0; }
        .modal-img { max-width: 90%; max-height: 90%; object-fit: contain; }
        .modal-content { padding: 20px; overflow-y: auto; }
        .modal-title { font-size: 20px; font-weight: 900; color: #1f2937; margin-bottom: 5px; }
        .modal-desc { font-size: 13px; color: #6b7280; margin-bottom: 15px; }
        .modal-badges { display: flex; justify-content: center; flex-wrap: wrap; gap: 8px; margin-bottom: 15px; border-top: 1px solid #f3f4f6; padding-top: 10px; }
        .modal-badge { background: #f3f4f6; color: #4b5563; font-size: 11px; padding: 4px 10px; border-radius: 20px; display: flex; align-items: center; gap: 4px; font-weight: bold; }
        
        .notes-input { width: 100%; border: 1px solid #e5e7eb; border-radius: 12px; padding: 10px; font-size: 13px; margin-bottom: 15px; resize: none; background: #f9fafb; }
        .notes-input:focus { outline: none; border-color: #FF9F1C; background: white; }
        .cart-select { width: 100%; border: 1px solid #e5e7eb; border-radius: 12px; padding: 12px; font-size: 14px; background: white; margin-bottom: 10px; outline: none; font-weight: bold; color: #374151; }
        .cart-select:focus { border-color: #FF9F1C; }
        
        .payment-option { flex: 1; border: 1px solid #e5e7eb; border-radius: 12px; padding: 10px; text-align: center; font-size: 11px; font-weight: bold; color: #4b5563; cursor: pointer; transition: 0.2s; display: flex; flex-direction: column; align-items: center; gap: 5px; }
        .payment-option:hover { background: #f9fafb; }
        .payment-option.active { border-color: #FF9F1C; background: #FFF7ED; color: #d97706; }
        
        .qty-control { display: flex; align-items: center; justify-content: center; gap: 15px; margin-bottom: 15px; }
        .qty-btn { width: 40px; height: 40px; background: #f3f4f6; border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 18px; font-weight: bold; color: #374151; cursor: pointer; }
        .add-to-order-btn { width: 100%; background: #FF9F1C; color: white; padding: 15px; border-radius: 16px; font-weight: 800; font-size: 16px; display: flex; justify-content: space-between; align-items: center; }
        .cart-bar { position: fixed; bottom: 20px; left: 50%; transform: translate(-50%, 150%); z-index: 90; width: 90%; max-width: 500px; background: #1f2937; color: white; border-radius: 16px; padding: 12px 20px; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 10px 30px rgba(0,0,0,0.3); transition: 0.4s; cursor: pointer; }
        .cart-bar.show { transform: translate(-50%, 0); }
        .cart-modal-content { padding: 20px; }
        .cart-item { display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid #f3f4f6; padding: 10px 0; }
        .cart-item-info { flex: 1; }
        .cart-item-title { font-weight: bold; font-size: 14px; color: #1f2937; }
        .cart-item-note { font-size: 11px; color: #9ca3af; font-style: italic; }
        .cart-item-price { font-weight: bold; color: #FF9F1C; font-size: 13px; }
        .cart-remove-btn { color: #ef4444; background: #fee2e2; width: 25px; height: 25px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 12px; margin-right: 10px; cursor: pointer; }
        html[dir="ltr"] .cart-remove-btn { margin-right: 0; margin-left: 10px; }
        
        .scroll-top { position: fixed; bottom: 100px; right: 20px; z-index: 80; width: 40px; height: 40px; background: white; color: #374151; border-radius: 50%; display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 15px rgba(0,0,0,0.1); opacity: 0; pointer-events: none; transition: 0.3s; border: 1px solid #e5e7eb; }
        html[dir="ltr"] .scroll-top { right: 20px; left: auto; }
        .scroll-top.show { opacity: 1; pointer-events: auto; }
        .fab-random { position: fixed; bottom: 100px; left: 20px; z-index: 70; background: linear-gradient(135deg, #6366f1 0%, #a855f7 100%); color: white; padding: 10px 20px; border-radius: 50px; box-shadow: 0 10px 25px rgba(99, 102, 241, 0.4); font-weight: 800; font-size: 14px; cursor: pointer; display: flex; align-items: center; gap: 8px; transition: transform 0.3s; animation: floatBtn 3s infinite ease-in-out; }
        html[dir="ltr"] .fab-random { left: auto; right: 20px; }
        @keyframes floatBtn { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-8px); } }
        .random-content { text-align: center; padding: 30px 20px; }
        .random-img-box { width: 150px; height: 150px; margin: 0 auto 20px; border-radius: 50%; border: 5px solid #f3f4f6; overflow: hidden; position: relative; box-shadow: 0 10px 30px rgba(0,0,0,0.1); }
        .random-img { width: 100%; height: 100%; object-fit: cover; }
        .shuffle-anim .random-img { filter: blur(2px); transform: scale(1.1); }
        
        .splash-screen { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: white; z-index: 9999; display: flex; align-items: center; justify-content: center; transition: opacity 0.5s ease-out, visibility 0.5s; }
        .splash-screen.hidden { opacity: 0; visibility: hidden; }
        .splash-logo { width: 120px; animation: pulseLogo 1.5s infinite; }
        @keyframes pulseLogo { 0% { transform: scale(1); } 50% { transform: scale(1.1); } 100% { transform: scale(1); } }
        .toast-box { position: fixed; top: 20px; left: 50%; transform: translateX(-50%) translateY(-100px); background: rgba(31, 41, 55, 0.95); color: white; padding: 12px 25px; border-radius: 50px; box-shadow: 0 10px 30px rgba(0,0,0,0.2); z-index: 1000; font-size: 13px; font-weight: bold; display: flex; align-items: center; gap: 10px; transition: transform 0.4s; width: max-content; }
        .toast-box.show { transform: translateX(-50%) translateY(0); }
        .sec-header { display: flex; align-items: center; gap: 10px; padding: 25px 15px 10px 15px; scroll-margin-top: 130px; }
        .sec-header h3 { font-size: 18px; font-weight: 900; color: #1f2937; }
        .sec-line { flex: 1; height: 2px; background: #f3f4f6; border-radius: 2px; }
        
        /* ğŸ›ï¸ BELL FLOATING BUTTON */
        .fab-bell { position: fixed; bottom: 160px; left: 20px; z-index: 80; width: 50px; height: 50px; background: #ef4444; color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 15px rgba(239, 68, 68, 0.4); font-size: 22px; cursor: pointer; transition: transform 0.2s; border: 2px solid white; }
        .fab-bell:active { transform: scale(0.9); }
        html[dir="ltr"] .fab-bell { left: auto; right: 20px; }
        .service-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin-top: 15px; }
        .service-btn { background: #f3f4f6; border: 1px solid #e5e7eb; border-radius: 12px; padding: 15px 5px; text-align: center; cursor: pointer; transition: 0.2s; display: flex; flex-direction: column; align-items: center; gap: 5px; }
        .service-btn:hover { background: #fee2e2; border-color: #ef4444; color: #b91c1c; }
        .service-btn i { font-size: 20px; margin-bottom: 2px; }
        .service-btn span { font-size: 10px; font-weight: bold; }
    </style>
</head>
<body class="bg-gray-50">

    <div class="fab-bell" onclick="openBellModal()"><i class="fa-solid fa-bell"></i></div>

    <div id="pwa-banner" class="fixed top-0 left-0 w-full bg-gray-900 text-white p-3 z-[100] hidden items-center justify-between shadow-md">
        <div class="flex items-center gap-3"><img src="images/logo.png" class="w-8 h-8 rounded-lg"><div class="text-xs font-bold"><p>ØªØ·Ø¨ÙŠÙ‚ ÙˆØ§Ùˆ Ø¨Ø´Ø§Ù…ÙŠÙ„</p><p class="text-gray-400 font-normal">ØªØ¬Ø±Ø¨Ø© Ø£Ø³Ø±Ø¹ Ø¨Ø¯ÙˆÙ† Ù†Øª!</p></div></div>
        <button onclick="installPWA()" class="bg-orange-500 text-white px-3 py-1 rounded text-xs font-bold">ØªØ«Ø¨ÙŠØª</button>
    </div>

    <div class="splash-screen" id="splash"><img src="images/logo.png" class="splash-logo"></div>
    <div class="toast-box" id="toast"><i class="fa-solid fa-circle-check text-green-400"></i> <span id="toast-msg">ØªÙ…Øª Ø§Ù„Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ø³Ù„Ø©</span></div>

    <div class="fab-random" onclick="openRandomizer()"><i class="fa-solid fa-shuffle"></i> <span data-i18n="randomBtn">Ù…Ø­ØªØ§Ø±ØŸ</span></div>
    <div class="scroll-top" onclick="window.scrollTo(0,0)" id="scroll-top-btn"><i class="fa-solid fa-arrow-up"></i></div>

    <div class="marquee-strip"><div class="marquee-content" id="marquee-txt">...</div></div>
    <div class="bg-white p-4 flex justify-between items-center sticky top-0 z-50 shadow-sm border-b border-gray-100" style="position: relative;">
        <h1 class="text-xl font-black text-gray-800" data-i18n="menuTitle">Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø·Ø¹Ø§Ù…</h1>
        <div class="flex gap-2">
            <button onclick="toggleLang()" id="lang-btn" class="bg-gray-100 h-9 px-3 rounded-xl flex items-center justify-center font-bold text-xs border border-gray-200">EN</button>
            <a href="index.html" class="w-9 h-9 bg-gray-100 rounded-full flex items-center justify-center text-gray-600 hover:bg-gray-200"><i class="fa-solid fa-arrow-left rtl:rotate-0 ltr:rotate-180"></i></a>
        </div>
    </div>

    <div class="sticky-cats">
        <div class="px-4 mb-3"><div class="search-box"><input type="text" id="search-input" class="search-input" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† ÙˆØ¬Ø¨ØªÙƒ..." onkeyup="filterMenu()"><i class="fa-solid fa-search search-icon"></i></div></div>
        <div class="cat-scroll">
            <div class="cat-item active" id="nav-offers" onclick="scrollToSec('sec-offers')"><div class="cat-circle"><img src="https://cdn-icons-png.flaticon.com/512/878/878052.png"></div><span class="cat-name" data-i18n="catOffers">Ø¹Ø±ÙˆØ¶</span></div>
            <div class="cat-item" id="nav-plates" onclick="scrollToSec('sec-plates')"><div class="cat-circle"><img src="https://cdn-icons-png.flaticon.com/512/706/706164.png"></div><span class="cat-name" data-i18n="catPlates">Ø£Ø·Ø¨Ø§Ù‚</span></div>
            <div class="cat-item" id="nav-clay" onclick="scrollToSec('sec-clay')"><div class="cat-circle"><img src="https://cdn-icons-png.flaticon.com/512/1895/1895658.png"></div><span class="cat-name" data-i18n="catClay">ÙØ®Ø§Ø±</span></div>
            <div class="cat-item" id="nav-sweets" onclick="scrollToSec('sec-sweets')"><div class="cat-circle"><img src="https://cdn-icons-png.flaticon.com/512/2515/2515183.png"></div><span class="cat-name" data-i18n="catSweets">Ø­Ù„Ø§</span></div>
            <div class="cat-item" id="nav-drinks" onclick="scrollToSec('sec-drinks')"><div class="cat-circle"><img src="https://cdn-icons-png.flaticon.com/512/2738/2738730.png"></div><span class="cat-name" data-i18n="catDrinks">Ù…Ø´Ø±ÙˆØ¨Ø§Øª</span></div>
            <div class="cat-item" onclick="filterFavorites()"><div class="cat-circle bg-red-50 border-red-100"><i class="fa-solid fa-heart text-red-500 text-xl"></i></div><span class="cat-name text-red-500" data-i18n="catFav">Ù…ÙØ¶Ù„ØªÙŠ</span></div>
        </div>
    </div>

    <div class="bg-orange-50/50 pb-6 pt-4" id="slider-section">
        <div class="px-4 mb-2 font-black text-gray-700 flex items-center gap-2"><i class="fa-solid fa-fire text-orange-500"></i> <span data-i18n="offersTitle">Ø§Ù„Ø¹Ø±ÙˆØ¶</span></div>
        <div class="slider-container group"><div class="slider-track" id="offers-track">
            <div class="offer-card" onclick="openProduct('familyBox', 110, 'images/offer2.jpg', 1200, ['users'])"><img src="images/offer2.jpg"></div>
            <div class="offer-card" onclick="openProduct('movieBox', 65, 'images/offer1.jpg', 850, ['film'])"><img src="images/offer1.jpg"></div>
            <div class="offer-card" onclick="openProduct('chickenBox', 70, 'images/offer3.jpg', 900)"><img src="images/offer3.jpg"></div>
            <div class="offer-card" onclick="openProduct('meatBox', 85, 'images/offer4.jpg', 950)"><img src="images/offer4.jpg"></div>
        </div></div>
    </div>

    <div id="menu-container">
        
        <div id="sec-offers" class="menu-sec"><div class="sec-header"><h3 data-i18n="catOffers">Ø¹Ø±ÙˆØ¶ Ø§Ù„ØªÙˆÙÙŠØ±</h3><div class="sec-line"></div></div><div class="menu-grid">
            <div class="menu-item" data-name="familyBox" onclick="openProduct('familyBox', 110, 'images/offer2.jpg', 1200, ['users'])">
                <div class="fav-btn-card" onclick="toggleFav(event, 'familyBox')"><i class="fa-regular fa-heart"></i></div>
                <div class="menu-img-box"><img src="images/offer2.jpg" class="menu-img"></div>
                <div class="p-3"><h4 class="font-bold text-xs text-gray-800" data-i18n="t_familyBox">Ø¨ÙˆÙƒØ³ Ù„Ù…Ø© Ø§Ù„Ø¹ÙŠÙ„Ø©</h4><p class="text-sm font-black text-orange-500 mt-1">110 <span class="curr">Ø±.Ø³</span></p></div>
            </div>
            <div class="menu-item" data-name="movieBox" onclick="openProduct('movieBox', 65, 'images/offer1.jpg', 850, ['film'])">
                <div class="fav-btn-card" onclick="toggleFav(event, 'movieBox')"><i class="fa-regular fa-heart"></i></div>
                <div class="menu-img-box"><img src="images/offer1.jpg" class="menu-img"></div>
                <div class="p-3"><h4 class="font-bold text-xs text-gray-800" data-i18n="t_movieBox">Ø¨ÙˆÙƒØ³ ÙÙŠÙ„Ù… Ø§Ù„Ø³Ù‡Ø±Ø©</h4><p class="text-sm font-black text-orange-500 mt-1">65 <span class="curr">Ø±.Ø³</span></p></div>
            </div>
        </div></div>

        <div id="sec-plates" class="menu-sec"><div class="sec-header"><h3 data-i18n="catPlates">Ø£Ø·Ø¨Ø§Ù‚</h3><div class="sec-line"></div></div><div class="menu-grid">
            <div class="menu-item" data-name="spChicken" onclick="openProduct('spChicken', 30, 'images/special_chicken.jpg', 450, ['cheese'])">
                <div class="fav-btn-card" onclick="toggleFav(event, 'spChicken')"><i class="fa-regular fa-heart"></i></div>
                <div class="menu-img-box"><img src="images/special_chicken.jpg" class="menu-img"></div>
                <div class="p-3"><h4 class="font-bold text-xs text-gray-800" data-i18n="t_spChicken">Ø³Ø¨ÙŠØ´Ø§Ù„ Ø¨Ø´Ø§Ù…ÙŠÙ„ Ø¯Ø¬Ø§Ø¬</h4><p class="text-sm font-black text-orange-500 mt-1">30 <span class="curr">Ø±.Ø³</span></p></div>
            </div>
            <div class="menu-item" data-name="spMeat" onclick="openProduct('spMeat', 35, 'images/special_meat.jpg', 500, ['cow'])">
                <div class="fav-btn-card" onclick="toggleFav(event, 'spMeat')"><i class="fa-regular fa-heart"></i></div>
                <div class="menu-img-box"><img src="images/special_meat.jpg" class="menu-img"></div>
                <div class="p-3"><h4 class="font-bold text-xs text-gray-800" data-i18n="t_spMeat">Ø³Ø¨ÙŠØ´Ø§Ù„ Ø¨Ø´Ø§Ù…ÙŠÙ„ Ù„Ø­Ù…</h4><p class="text-sm font-black text-orange-500 mt-1">35 <span class="curr">Ø±.Ø³</span></p></div>
            </div>
            <div class="menu-item" data-name="balls" onclick="openProduct('balls', 25, 'images/balls.jpg', 320, ['egg'])">
                <div class="fav-btn-card" onclick="toggleFav(event, 'balls')"><i class="fa-regular fa-heart"></i></div>
                <div class="menu-img-box"><img src="images/balls.jpg" class="menu-img"></div>
                <div class="p-3"><h4 class="font-bold text-xs text-gray-800" data-i18n="t_balls">ÙƒØ±Ø§Øª Ø§Ù„Ø¨Ø·Ø§Ø·Ø³</h4><p class="text-sm font-black text-orange-500 mt-1">25 <span class="curr">Ø±.Ø³</span></p></div>
            </div>
            <div class="menu-item" data-name="mouChicken" onclick="openProduct('mouChicken', 25, 'images/moussaka_chicken.jpg', 380)">
                <div class="fav-btn-card" onclick="toggleFav(event, 'mouChicken')"><i class="fa-regular fa-heart"></i></div>
                <div class="menu-img-box"><img src="images/moussaka_chicken.jpg" class="menu-img"></div>
                <div class="p-3"><h4 class="font-bold text-xs text-gray-800" data-i18n="t_mouChicken">Ø¨Ø´Ø§Ù…ÙŠÙ„ Ù…ØµÙ‚Ø¹Ø© Ø¯Ø¬Ø§Ø¬</h4><p class="text-sm font-black text-orange-500 mt-1">25 <span class="curr">Ø±.Ø³</span></p></div>
            </div>
        </div></div>

        <div id="sec-clay" class="menu-sec"><div class="sec-header"><h3 data-i18n="catClay">ÙØ®Ø§Ø±</h3><div class="sec-line"></div></div><div class="menu-grid">
            <div class="menu-item" data-name="clayMeat" onclick="openProduct('clayMeat', 40, 'images/clay_meat.jpg', 550)">
                <div class="fav-btn-card" onclick="toggleFav(event, 'clayMeat')"><i class="fa-regular fa-heart"></i></div>
                <div class="menu-img-box"><img src="images/clay_meat.jpg" class="menu-img"></div>
                <div class="p-3"><h4 class="font-bold text-xs text-gray-800" data-i18n="t_clayMeat">Ø¨Ø´Ø§Ù…ÙŠÙ„ ÙØ®Ø§Ø± Ù„Ø­Ù…</h4><p class="text-sm font-black text-orange-500 mt-1">40 <span class="curr">Ø±.Ø³</span></p></div>
            </div>
            <div class="menu-item" data-name="clayChicken" onclick="openProduct('clayChicken', 35, 'images/clay_chicken.jpg', 520)">
                <div class="fav-btn-card" onclick="toggleFav(event, 'clayChicken')"><i class="fa-regular fa-heart"></i></div>
                <div class="menu-img-box"><img src="images/clay_chicken.jpg" class="menu-img"></div>
                <div class="p-3"><h4 class="font-bold text-xs text-gray-800" data-i18n="t_clayChicken">Ø¨Ø´Ø§Ù…ÙŠÙ„ ÙØ®Ø§Ø± Ø¯Ø¬Ø§Ø¬</h4><p class="text-sm font-black text-orange-500 mt-1">35 <span class="curr">Ø±.Ø³</span></p></div>
            </div>
        </div></div>

        <div id="sec-sweets" class="menu-sec"><div class="sec-header"><h3 data-i18n="catSweets">Ø­Ù„Ø§</h3><div class="sec-line"></div></div><div class="menu-grid">
            <div class="menu-item" data-name="omAli" onclick="openProduct('omAli', 15, 'images/omali.jpg', 300)">
                <div class="fav-btn-card" onclick="toggleFav(event, 'omAli')"><i class="fa-regular fa-heart"></i></div>
                <div class="menu-img-box"><img src="images/omali.jpg" class="menu-img"></div>
                <div class="p-3"><h4 class="font-bold text-xs text-gray-800" data-i18n="t_omAli">ÙØ®Ø§Ø± Ø£Ù… Ø¹Ù„ÙŠ</h4><p class="text-sm font-black text-orange-500 mt-1">15 <span class="curr">Ø±.Ø³</span></p></div>
            </div>
        </div></div>

        <div id="sec-drinks" class="menu-sec"><div class="sec-header"><h3 data-i18n="catDrinks">Ù…Ø´Ø±ÙˆØ¨Ø§Øª</h3><div class="sec-line"></div></div><div class="menu-grid" style="grid-template-columns: repeat(3, 1fr);">
            <div class="menu-item text-center" data-name="pepsi" onclick="openProduct('pepsi', 2.5, 'images/pepsi.png', 150)">
                <div class="p-2"><img src="images/pepsi.png" class="w-10 mx-auto"></div><h4 class="font-bold text-[10px]" data-i18n="t_pepsi">Ø¨ÙŠØ¨Ø³ÙŠ</h4><p class="text-xs font-bold text-orange-500 pb-2">2.5 <span class="curr">Ø±.Ø³</span></p>
            </div>
            <div class="menu-item text-center" data-name="7up" onclick="openProduct('7up', 2.5, 'images/7up.png', 140)">
                <div class="p-2"><img src="images/7up.png" class="w-10 mx-auto filter hue-rotate-180"></div><h4 class="font-bold text-[10px]" data-i18n="t_7up">Ø³ÙÙ† Ø£Ø¨</h4><p class="text-xs font-bold text-orange-500 pb-2">2.5 <span class="curr">Ø±.Ø³</span></p>
            </div>
            <div class="menu-item text-center" data-name="water" onclick="openProduct('water', 1, 'images/water.png', 0)">
                <div class="p-2"><img src="images/water.png" class="w-10 mx-auto"></div><h4 class="font-bold text-[10px]" data-i18n="t_water">Ù…Ø§Ø¡</h4><p class="text-xs font-bold text-orange-500 pb-2">1.0 <span class="curr">Ø±.Ø³</span></p>
            </div>
        </div></div>
    </div>

    <div class="cart-bar" id="cart-bar" onclick="openCartModal()"><div class="flex items-center gap-3"><div class="w-10 h-10 bg-white/20 rounded-full flex items-center justify-center text-yellow-400 font-bold text-lg" id="cart-count">0</div><div><p class="text-[10px] text-gray-300" data-i18n="total">Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ</p><p class="font-bold text-lg leading-none"><span id="cart-total">0</span> <span class="curr">Ø±.Ø³</span></p></div></div><div class="bg-yellow-500 text-gray-900 font-bold px-5 py-2 rounded-xl text-sm hover:bg-yellow-400 transition" data-i18n="viewCart">Ø¹Ø±Ø¶ Ø§Ù„Ø³Ù„Ø©</div></div>

    <div class="modal-overlay" id="product-modal"><div class="product-modal"><div class="modal-close" onclick="closeModal()"><i class="fa-solid fa-times"></i></div><div class="modal-img-box"><img src="" id="modal-img" class="modal-img"></div><div class="modal-content"><h2 class="modal-title" id="modal-title">...</h2><p class="modal-desc" id="modal-desc">...</p><div style="text-align: center;"><div class="allergen-title" data-i18n="allergyInfo">Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø­Ø³Ø§Ø³ÙŠØ©</div><div class="modal-badges"><span class="modal-badge text-orange-600 bg-orange-50"><i class="fa-solid fa-fire"></i> <span id="modal-cals">0</span> <span data-i18n="cal">Ø³Ø¹Ø±Ø©</span></span><div id="modal-allergens" class="flex gap-2"></div></div></div><textarea class="notes-input" id="item-note" placeholder="Ø¥Ø¶Ø§ÙØ© Ù…Ù„Ø§Ø­Ø¸Ø©..."></textarea><div class="qty-control"><div class="qty-btn" onclick="updateQty(-1)">-</div><div class="qty-val" id="modal-qty">1</div><div class="qty-btn" onclick="updateQty(1)">+</div></div><button class="add-to-order-btn" onclick="confirmAdd()"><span data-i18n="addToOrder">Ø£Ø¶Ù Ø¥Ù„Ù‰ Ø·Ù„Ø¨ÙŠ</span><span><span id="modal-price">0</span> <span class="curr">Ø±.Ø³</span></span></button></div></div></div>

    <div class="modal-overlay" id="bell-modal">
        <div class="product-modal bg-white text-center p-6">
            <div class="modal-close" onclick="closeBellModal()"><i class="fa-solid fa-times"></i></div>
            <div class="w-16 h-16 bg-red-100 text-red-500 rounded-full flex items-center justify-center mx-auto mb-3 text-3xl"><i class="fa-solid fa-bell-concierge"></i></div>
            <h2 class="text-xl font-bold text-gray-800 mb-4" data-i18n="callCaptain">Ù†Ø¯Ø§Ø¡ Ø§Ù„ÙƒØ§Ø¨ØªÙ†</h2>
            
            <input type="number" id="bell-table" class="w-full bg-gray-50 border border-gray-200 rounded-xl p-3 text-center font-bold mb-4 focus:ring-2 ring-red-500 outline-none" placeholder="Ø±Ù‚Ù… Ø§Ù„Ø·Ø§ÙˆÙ„Ø©">
            
            <div class="service-grid">
                <div class="service-btn" onclick="requestService('ğŸ§¾ Ø§Ù„ÙØ§ØªÙˆØ±Ø©')"><i class="fa-solid fa-receipt text-gray-600"></i><span data-i18n="s_bill">Ø§Ù„ÙØ§ØªÙˆØ±Ø©</span></div>
                <div class="service-btn" onclick="requestService('ğŸ’§ Ù…ÙŠØ§Ù‡')"><i class="fa-solid fa-glass-water text-blue-500"></i><span data-i18n="s_water">Ù…ÙŠØ§Ù‡</span></div>
                <div class="service-btn" onclick="requestService('ğŸ¥– Ø®Ø¨Ø² Ø²ÙŠØ§Ø¯Ø©')"><i class="fa-solid fa-bread-slice text-yellow-600"></i><span data-i18n="s_bread">Ø®Ø¨Ø²</span></div>
                <div class="service-btn" onclick="requestService('ğŸ§¹ ØªÙ†Ø¸ÙŠÙ')"><i class="fa-solid fa-broom text-purple-500"></i><span data-i18n="s_clean">ØªÙ†Ø¸ÙŠÙ</span></div>
                <div class="service-btn" onclick="requestService('ğŸ™‹â€â™‚ï¸ ÙƒØ§Ø¨ØªÙ†')"><i class="fa-solid fa-user-tie text-gray-800"></i><span data-i18n="s_captain">ÙƒØ§Ø¨ØªÙ†</span></div>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="cart-modal"><div class="product-modal"><div class="modal-close" onclick="closeCartModal()"><i class="fa-solid fa-times"></i></div><div class="p-4 border-b border-gray-100"><h2 class="text-xl font-bold text-gray-800" data-i18n="cartTitle">Ø³Ù„Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª ğŸ›’</h2></div><div class="cart-modal-content" id="cart-items-container" style="max-height: 300px; overflow-y: auto;"></div><div class="p-4 bg-gray-50 mt-auto"><div class="flex gap-2 mb-3"><input type="text" id="promo-code" class="w-full border rounded-lg px-3 py-2 text-xs uppercase" placeholder="CODE"><button onclick="applyPromo()" class="bg-gray-800 text-white px-4 rounded-lg text-xs font-bold" data-i18n="apply">ØªØ·Ø¨ÙŠÙ‚</button></div><div id="promo-msg" class="text-xs font-bold text-green-500 hidden mb-2 text-center"></div><div class="grid grid-cols-2 gap-2 mb-3"><select id="branch-select" class="cart-select mb-0"><option value="yanbu" data-i18n="br_yanbu">ÙØ±Ø¹ ÙŠÙ†Ø¨Ø¹</option><option value="jeddah" data-i18n="br_jeddah">ÙØ±Ø¹ Ø¬Ø¯Ø©</option></select><select id="order-type" class="cart-select mb-0"><option value="delivery" data-i18n="t_del">ØªÙˆØµÙŠÙ„ ğŸ›µ</option><option value="pickup" data-i18n="t_pick">Ø§Ø³ØªÙ„Ø§Ù… ğŸ›ï¸</option></select></div><div class="flex gap-2 mb-3 justify-center bg-white p-2 rounded-xl border border-gray-100"><div class="payment-option active" onclick="selectPayment('cash', this)"><i class="fa-solid fa-money-bill-wave"></i></div><div class="payment-option" onclick="selectPayment('card', this)"><i class="fa-regular fa-credit-card"></i></div><div class="payment-option" onclick="selectPayment('apple', this)"><i class="fa-brands fa-apple"></i></div></div><div class="flex justify-between font-bold text-lg mb-4 text-gray-800"><span data-i18n="total">Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ</span><span><span id="modal-cart-total">0</span> <span class="curr">Ø±.Ø³</span></span></div><button class="add-to-order-btn justify-center" onclick="checkout()"><span data-i18n="checkout">Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø·Ù„Ø¨</span> <i class="fa-brands fa-whatsapp mr-2"></i></button></div></div></div>

    <div class="modal-overlay" id="random-modal"><div class="product-modal"><div class="modal-close" onclick="closeRandomModal()"><i class="fa-solid fa-times"></i></div><div class="random-content"><h2 class="text-2xl font-black text-gray-800 mb-2" data-i18n="randTitle">ğŸ¤” Ù…Ø­ØªØ§Ø±ØŸ</h2><div class="random-img-box" id="random-box"><img src="images/logo.png" class="random-img" id="random-img"></div><h3 class="text-xl font-bold text-purple-600 mb-6" id="random-name">...</h3><button id="spin-btn" class="bg-purple-600 text-white w-full py-3 rounded-xl font-bold" onclick="spinRandomizer()" data-i18n="randSpin">ÙŠÙ„Ø§ Ø§Ø®ØªØ§Ø± Ù„ÙŠ! ğŸ²</button><button id="add-random-btn" class="hidden bg-green-500 text-white w-full py-3 rounded-xl font-bold mt-2" onclick="addRandomToCart()"><span data-i18n="addToOrder">Ø£Ø¶Ù Ù„Ù„Ø³Ù„Ø©</span> (<span id="random-price">0</span> <span class="curr">Ø±.Ø³</span>)</button></div></div></div>

    <script>
        // --- TRANSLATIONS DATABASE ---
        const translations = {
            ar: {
                menuTitle: 'Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø·Ø¹Ø§Ù…', offersTitle: 'Ø§Ù„Ø¹Ø±ÙˆØ¶', 
                catOffers: 'Ø¹Ø±ÙˆØ¶', catPlates: 'Ø£Ø·Ø¨Ø§Ù‚', catClay: 'ÙØ®Ø§Ø±', catSweets: 'Ø­Ù„Ø§', catDrinks: 'Ù…Ø´Ø±ÙˆØ¨Ø§Øª', catFav: 'Ù…ÙØ¶Ù„ØªÙŠ',
                total: 'Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ', checkout: 'Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø·Ù„Ø¨', curr: 'Ø±.Ø³', addToOrder: 'Ø£Ø¶Ù Ø¥Ù„Ù‰ Ø·Ù„Ø¨ÙŠ', viewCart: 'Ø¹Ø±Ø¶ Ø§Ù„Ø³Ù„Ø©',
                cartTitle: 'Ø³Ù„Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª', apply: 'ØªØ·Ø¨ÙŠÙ‚', allergyInfo: 'Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø­Ø³Ø§Ø³ÙŠØ©', cal: 'Ø³Ø¹Ø±Ø©',
                randomBtn: 'Ù…Ø­ØªØ§Ø±ØŸ', randTitle: 'ğŸ¤” Ù…Ø­ØªØ§Ø±ØŸ', randSpin: 'ÙŠÙ„Ø§ Ø§Ø®ØªØ§Ø± Ù„ÙŠ! ğŸ²',
                callCaptain: 'Ù†Ø¯Ø§Ø¡ Ø§Ù„ÙƒØ§Ø¨ØªÙ†', s_bill: 'Ø§Ù„ÙØ§ØªÙˆØ±Ø©', s_water: 'Ù…ÙŠØ§Ù‡', s_bread: 'Ø®Ø¨Ø²', s_clean: 'ØªÙ†Ø¸ÙŠÙ', s_captain: 'ÙƒØ§Ø¨ØªÙ†',
                searchPlace: 'Ø§Ø¨Ø­Ø« Ø¹Ù† ÙˆØ¬Ø¨ØªÙƒ...',
                br_yanbu: 'ÙØ±Ø¹ ÙŠÙ†Ø¨Ø¹', br_jeddah: 'ÙØ±Ø¹ Ø¬Ø¯Ø©', t_del: 'ØªÙˆØµÙŠÙ„ ğŸ›µ', t_pick: 'Ø§Ø³ØªÙ„Ø§Ù… ğŸ›ï¸',
                
                // Products
                t_familyBox: 'Ø¨ÙˆÙƒØ³ Ù„Ù…Ø© Ø§Ù„Ø¹ÙŠÙ„Ø©', d_familyBox: 'Ø¹Ø±Ø¶ Ø§Ù„ØªÙˆÙÙŠØ± Ø§Ù„Ø¹Ø§Ø¦Ù„ÙŠ! 2 Ø·Ø§Ø¬Ù† Ù…ÙƒØ±ÙˆÙ†Ø© Ø¨Ø´Ø§Ù…ÙŠÙ„ ÙƒØ¨ÙŠØ±ØŒ 12 Ù‚Ø·Ø¹Ø© ÙƒØ±Ø§Øª Ø¨Ø·Ø§Ø·Ø³ØŒ ÙˆÙ„ØªØ± Ø¨ÙŠØ¨Ø³ÙŠ.',
                t_movieBox: 'Ø¨ÙˆÙƒØ³ ÙÙŠÙ„Ù… Ø§Ù„Ø³Ù‡Ø±Ø©', d_movieBox: 'ÙˆØ¬Ø¨Ø© ÙØ±Ø¯ÙŠØ© Ù…ØªÙƒØ§Ù…Ù„Ø© ØªØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ù…ÙƒØ±ÙˆÙ†Ø© Ø¨Ø´Ø§Ù…ÙŠÙ„ Ø§Ø®ØªÙŠØ§Ø±Ùƒ (Ù„Ø­Ù… Ø£Ùˆ Ø¯Ø¬Ø§Ø¬) Ù…Ø¹ ÙƒØ±Ø§Øª Ø§Ù„Ø¨Ø·Ø§Ø·Ø³.',
                t_spChicken: 'Ø³Ø¨ÙŠØ´Ø§Ù„ Ø¨Ø´Ø§Ù…ÙŠÙ„ Ø¯Ø¬Ø§Ø¬', d_spChicken: 'Ù…ÙƒØ±ÙˆÙ†Ø© Ø¨ÙŠÙ†Ø§ Ù…ØºØ·Ø§Ø© Ø¨ØµÙˆØµ Ø§Ù„Ø¨Ø´Ø§Ù…ÙŠÙ„ Ø§Ù„ØºÙ†ÙŠ ÙˆÙ‚Ø·Ø¹ Ø§Ù„Ø¯Ø¬Ø§Ø¬ Ø§Ù„Ø·Ø§Ø²Ø¬Ø© ÙˆØ¬Ø¨Ù†Ø© Ø§Ù„Ù…ÙˆØªØ²Ø§Ø±ÙŠÙ„Ø§.',
                t_spMeat: 'Ø³Ø¨ÙŠØ´Ø§Ù„ Ø¨Ø´Ø§Ù…ÙŠÙ„ Ù„Ø­Ù…', d_spMeat: 'Ù…ÙƒØ±ÙˆÙ†Ø© Ø¨ÙŠÙ†Ø§ Ø¨Ø§Ù„Ù„Ø­Ù… Ø§Ù„Ù…ÙØ±ÙˆÙ… Ø§Ù„Ù…ØªØ¨Ù„ ÙˆØµÙˆØµ Ø§Ù„Ø¨Ø´Ø§Ù…ÙŠÙ„ Ø§Ù„ÙƒØ±ÙŠÙ…ÙŠ ÙˆØ·Ø¨Ù‚Ø© ØºÙ†ÙŠØ© Ù…Ù† Ø§Ù„Ø¬Ø¨Ù†.',
                t_balls: 'ÙƒØ±Ø§Øª Ø§Ù„Ø¨Ø·Ø§Ø·Ø³', d_balls: 'ÙƒØ±Ø§Øª Ø§Ù„Ø¨Ø·Ø§Ø·Ø³ Ø§Ù„Ù…Ù‡Ø±ÙˆØ³Ø© ÙˆØ§Ù„Ù…Ø­Ø´ÙŠØ© Ø¨Ø§Ù„Ø¬Ø¨Ù†ØŒ Ù…Ù‚Ù„ÙŠØ© Ø­ØªÙ‰ Ø§Ù„Ù‚Ø±Ù…Ø´Ø© Ø§Ù„Ø°Ù‡Ø¨ÙŠØ©.',
                t_mouChicken: 'Ø¨Ø´Ø§Ù…ÙŠÙ„ Ù…ØµÙ‚Ø¹Ø© Ø¯Ø¬Ø§Ø¬', d_mouChicken: 'Ø·Ø¨Ù‚Ø§Øª Ù…Ù† Ø§Ù„Ø¨Ø§Ø°Ù†Ø¬Ø§Ù† ÙˆØ§Ù„Ø¨Ø·Ø§Ø·Ø³ Ù…Ø¹ Ø­Ø´ÙˆØ© Ø§Ù„Ø¯Ø¬Ø§Ø¬ ÙˆØµÙˆØµ Ø§Ù„Ø¨Ø´Ø§Ù…ÙŠÙ„.',
                t_clayMeat: 'Ø¨Ø´Ø§Ù…ÙŠÙ„ ÙØ®Ø§Ø± Ù„Ø­Ù…', d_clayMeat: 'Ø·Ø§Ø¬Ù† ÙØ®Ø§Ø± ØªÙ‚Ù„ÙŠØ¯ÙŠ ÙŠØ­ØªÙØ¸ Ø¨Ø§Ù„Ø­Ø±Ø§Ø±Ø©ØŒ Ù…ÙƒØ±ÙˆÙ†Ø© Ø¨Ø´Ø§Ù…ÙŠÙ„ Ø¨Ø§Ù„Ù„Ø­Ù… Ø§Ù„Ù…ÙØ±ÙˆÙ….',
                t_clayChicken: 'Ø¨Ø´Ø§Ù…ÙŠÙ„ ÙØ®Ø§Ø± Ø¯Ø¬Ø§Ø¬', d_clayChicken: 'Ø·Ø§Ø¬Ù† ÙØ®Ø§Ø± Ø¨Ù…ÙƒØ±ÙˆÙ†Ø© Ø§Ù„Ø¯Ø¬Ø§Ø¬ ÙˆØ§Ù„Ø¨Ø´Ø§Ù…ÙŠÙ„ØŒ Ø·Ø¹Ù… Ø¨ÙŠØªÙŠ Ø£ØµÙŠÙ„.',
                t_omAli: 'ÙØ®Ø§Ø± Ø£Ù… Ø¹Ù„ÙŠ', d_omAli: 'Ø§Ù„Ø­Ù„ÙˆÙ‰ Ø§Ù„Ù…ØµØ±ÙŠØ© Ø§Ù„ØªÙ‚Ù„ÙŠØ¯ÙŠØ© ÙÙŠ Ø·Ø§Ø¬Ù† ÙØ®Ø§Ø±ØŒ Ø±Ù‚Ø§Ø¦Ù‚ Ø¨Ø§Ù„Ù„Ø¨Ù† ÙˆØ§Ù„Ù…ÙƒØ³Ø±Ø§Øª ÙˆØ§Ù„Ù‚Ø´Ø·Ø©.',
                t_pepsi: 'Ø¨ÙŠØ¨Ø³ÙŠ', d_pepsi: 'Ù…Ø´Ø±ÙˆØ¨ ØºØ§Ø²ÙŠ Ø¨Ø§Ø±Ø¯.',
                t_7up: 'Ø³ÙÙ† Ø£Ø¨', d_7up: 'Ù…Ø´Ø±ÙˆØ¨ ØºØ§Ø²ÙŠ Ù„ÙŠÙ…ÙˆÙ†.',
                t_water: 'Ù…Ø§Ø¡', d_water: 'Ù…ÙŠØ§Ù‡ Ù…Ø¹Ø¯Ù†ÙŠØ© Ø·Ø¨ÙŠØ¹ÙŠØ©.'
            },
            en: {
                menuTitle: 'Food Menu', offersTitle: 'Offers', 
                catOffers: 'Offers', catPlates: 'Plates', catClay: 'Clay Pots', catSweets: 'Desserts', catDrinks: 'Drinks', catFav: 'Favorites',
                total: 'Total', checkout: 'Checkout', curr: 'SAR', addToOrder: 'Add to Order', viewCart: 'View Cart',
                cartTitle: 'My Cart', apply: 'Apply', allergyInfo: 'Allergens', cal: 'Cal',
                randomBtn: 'Random?', randTitle: 'ğŸ¤” Hungry?', randSpin: 'Spin for me! ğŸ²',
                callCaptain: 'Call Captain', s_bill: 'Bill', s_water: 'Water', s_bread: 'Bread', s_clean: 'Clean', s_captain: 'Captain',
                searchPlace: 'Search for your meal...',
                br_yanbu: 'Yanbu Branch', br_jeddah: 'Jeddah Branch', t_del: 'Delivery ğŸ›µ', t_pick: 'Pickup ğŸ›ï¸',

                // Products
                t_familyBox: 'Family Gathering Box', d_familyBox: 'Family offer! 2 large Bechamel pasta, 12 potato balls, 1L Pepsi.',
                t_movieBox: 'Movie Night Box', d_movieBox: 'Single meal with your choice of Bechamel pasta + potato balls + drink.',
                t_spChicken: 'Special Bechamel Chicken', d_spChicken: 'Penne pasta with rich Bechamel sauce, fresh chicken and mozzarella.',
                t_spMeat: 'Special Bechamel Meat', d_spMeat: 'Penne pasta with seasoned minced meat, creamy Bechamel and cheese.',
                t_balls: 'Potato Balls', d_balls: 'Mashed potato balls stuffed with cheese, fried to golden crisp.',
                t_mouChicken: 'Moussaka Bechamel Chicken', d_mouChicken: 'Layers of eggplant and potatoes with chicken filling and Bechamel.',
                t_clayMeat: 'Clay Meat Bechamel', d_clayMeat: 'Traditional clay pot keeping heat, Bechamel pasta with minced meat.',
                t_clayChicken: 'Clay Chicken Bechamel', d_clayChicken: 'Clay pot with chicken pasta and Bechamel, authentic home taste.',
                t_omAli: 'Om Ali Clay', d_omAli: 'Traditional Egyptian dessert in clay pot, flakes with milk, nuts and cream.',
                t_pepsi: 'Pepsi', d_pepsi: 'Cold soft drink.',
                t_7up: '7 Up', d_7up: 'Lemon soft drink.',
                t_water: 'Water', d_water: 'Natural mineral water.'
            }
        };

        // --- GLOBAL VARS ---
        let currentLang = 'ar';
        let currentItem = {}; let currentQty = 1; let cart = []; let total = 0; let selectedPayment = 'ÙƒØ§Ø´ ğŸ’µ';
        
        // --- TRANSLATION LOGIC ---
        function toggleLang() {
            const html = document.documentElement;
            const btn = document.getElementById('lang-btn');
            
            if (html.lang === 'ar') {
                html.dir = 'ltr'; html.lang = 'en'; btn.innerText = 'AR'; currentLang = 'en';
            } else {
                html.dir = 'rtl'; html.lang = 'ar'; btn.innerText = 'EN'; currentLang = 'ar';
            }
            updateContent();
        }

        function updateContent() {
            const t = translations[currentLang];
            
            // Text Elements
            document.querySelectorAll('[data-i18n]').forEach(el => {
                const key = el.getAttribute('data-i18n');
                if (t[key]) el.innerText = t[key];
            });
            
            // Placeholders
            document.getElementById('search-input').placeholder = t.searchPlace;
            
            // Currency
            document.querySelectorAll('.curr').forEach(el => el.innerText = t.curr);
            
            // Marquee
            document.getElementById('marquee-txt').innerHTML = `<span class="marquee-item">${currentLang === 'ar' ? 'ğŸ” Ø£Ø´Ù‡Ù‰ Ø§Ù„Ø·ÙˆØ§Ø¬Ù† â€¢ ğŸšš ØªÙˆØµÙŠÙ„ Ø³Ø±ÙŠØ¹' : 'ğŸ” Tasty Casseroles â€¢ ğŸšš Fast Delivery'}</span>`;
        }

        // --- PRODUCT LOGIC (UPDATED FOR TRANSLATION) ---
        function openProduct(key, price, img, cals, allergens = []) {
            // Store key, not just title
            const title = translations[currentLang]['t_' + key];
            const desc = translations[currentLang]['d_' + key];
            
            currentItem = { key, price }; // Save KEY
            currentQty = 1;
            
            document.getElementById('modal-title').innerText = title;
            document.getElementById('modal-desc').innerText = desc;
            document.getElementById('modal-img').src = img;
            document.getElementById('modal-cals').innerText = cals;
            document.getElementById('modal-qty').innerText = 1;
            document.getElementById('item-note').value = ""; 
            updateModalPrice();
            
            const algContainer = document.getElementById('modal-allergens'); algContainer.innerHTML = '';
            allergens.forEach(icon => { algContainer.innerHTML += `<span class="modal-badge"><i class="fa-solid fa-${icon}"></i></span>`; });
            
            document.getElementById('product-modal').classList.add('active');
        }

        function updateModalPrice() { document.getElementById('modal-price').innerText = currentItem.price * currentQty; }
        
        function confirmAdd() {
            const note = document.getElementById('item-note').value;
            // Get current localized title for the cart view
            const title = translations[currentLang]['t_' + currentItem.key];
            addToCart(title, currentItem.price * currentQty, currentQty, note);
            closeModal();
            showToast(currentLang === 'ar' ? 'ØªÙ…Øª Ø§Ù„Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ø³Ù„Ø©' : 'Added to Cart');
        }

        // --- OTHER FUNCTIONS (SEARCH, CART, ETC) ---
        function filterMenu() { 
            const input = document.getElementById('search-input').value.toLowerCase();
            const items = document.querySelectorAll('.menu-item');
            const slider = document.getElementById('slider-section');
            if(input.length > 0) slider.style.display = 'none'; else slider.style.display = 'block';
            
            items.forEach(item => {
                // We check against the key now for better matching, or translate on fly
                const key = item.getAttribute('data-name'); 
                const nameAr = translations['ar']['t_' + key].toLowerCase();
                const nameEn = translations['en']['t_' + key].toLowerCase();
                
                if(nameAr.includes(input) || nameEn.includes(input)) item.style.display = 'flex';
                else item.style.display = 'none';
            });
        }

        function addToCart(name, price, qty, note) { cart.push({name, price, qty, note}); updateCartUI(); }
        function removeItem(index) { cart.splice(index, 1); updateCartUI(); renderCartItems(); if(cart.length === 0) closeCartModal(); }
        
        // Discount Logic
        let discount = 0; let appliedCode = "";
        function applyPromo() {
            const code = document.getElementById('promo-code').value.toUpperCase();
            const msg = document.getElementById('promo-msg');
            if(code === "WOW20") {
                discount = 0.20; appliedCode = "WOW20";
                msg.innerText = currentLang === 'ar' ? "âœ… ØªÙ… Ø§Ù„Ø®ØµÙ…!" : "âœ… Applied!";
                msg.classList.remove('hidden', 'text-red-500'); msg.classList.add('text-green-500'); updateCartUI();
            } else {
                discount = 0; appliedCode = "";
                msg.innerText = currentLang === 'ar' ? "âŒ ÙƒÙˆØ¯ Ø®Ø·Ø£" : "âŒ Invalid Code";
                msg.classList.remove('hidden', 'text-green-500'); msg.classList.add('text-red-500'); updateCartUI();
            }
        }

        function updateCartUI() {
            const subtotal = cart.reduce((sum, item) => sum + item.price, 0);
            total = subtotal - (subtotal * discount);
            document.getElementById('cart-count').innerText = cart.length;
            document.getElementById('cart-total').innerText = total.toFixed(1);
            const modalTotal = document.getElementById('modal-cart-total');
            if(discount > 0) { modalTotal.innerHTML = `<span class="line-through text-gray-400 text-sm">${subtotal}</span> ${total.toFixed(1)}`; } 
            else { modalTotal.innerText = total.toFixed(1); }
            const bar = document.getElementById('cart-bar');
            if(cart.length > 0) bar.classList.add('show'); else bar.classList.remove('show');
        }

        function checkout() {
            if (cart.length === 0) return;
            closeCartModal();
            // Confetti
            var duration = 2000; var end = Date.now() + duration;
            (function frame() { confetti({ particleCount: 5, angle: 60, spread: 55, origin: { x: 0 } }); confetti({ particleCount: 5, angle: 120, spread: 55, origin: { x: 1 } }); if (Date.now() < end) requestAnimationFrame(frame); }());

            const globalNote = document.getElementById('cart-note').value;
            const branchKey = document.getElementById('branch-select').value;
            const phone = branchKey === 'yanbu' ? '966538111577' : '966920004123';
            
            let message = `*New Order / Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯*\n`;
            cart.forEach(item => { message += `â–ªï¸ ${item.qty}x ${item.name} (${item.price})\n`; if(item.note) message += `   ğŸ“ ${item.note}\n`; });
            message += `\nğŸ’° Total: ${total.toFixed(1)}`;
            
            setTimeout(() => { window.open(`https://wa.me/${phone}?text=${encodeURIComponent(message)}`, '_blank'); }, 2000);
        }

        // Boilerplate Helpers
        function closeModal() { document.getElementById('product-modal').classList.remove('active'); }
        function updateQty(change) { if (currentQty + change > 0) { currentQty += change; document.getElementById('modal-qty').innerText = currentQty; updateModalPrice(); } }
        function openCartModal() { renderCartItems(); document.getElementById('cart-modal').classList.add('active'); }
        function closeCartModal() { document.getElementById('cart-modal').classList.remove('active'); }
        function renderCartItems() { const container = document.getElementById('cart-items-container'); container.innerHTML = ''; if(cart.length === 0) { container.innerHTML = '<p class="text-center text-gray-400 py-4">...</p>'; return; } cart.forEach((item, index) => { const noteHtml = item.note ? `<div class="cart-item-note">ğŸ“ ${item.note}</div>` : ''; container.innerHTML += `<div class="cart-item"><div class="cart-remove-btn" onclick="removeItem(${index})"><i class="fa-solid fa-times"></i></div><div class="cart-item-info"><div class="cart-item-title">${item.qty}x ${item.name}</div>${noteHtml}</div><div class="cart-item-price">${item.price} <span class="curr">${translations[currentLang].curr}</span></div></div>`; }); }
        function selectPayment(type, elem) { document.querySelectorAll('.payment-option').forEach(el => el.classList.remove('active')); elem.classList.add('active'); if(type === 'cash') selectedPayment = 'Cash'; else if(type === 'card') selectedPayment = 'Card'; else selectedPayment = 'Apple Pay'; }
        
        // Bell & Random
        function openBellModal() { document.getElementById('bell-modal').classList.add('active'); }
        function closeBellModal() { document.getElementById('bell-modal').classList.remove('active'); }
        function requestService(srv) { window.open(`https://wa.me/966538111577?text=Service: ${srv}`, '_blank'); closeBellModal(); }
        
        const randomItems = [{key:'movieBox', price: 65, img: 'images/offer1.jpg'}, {key:'spChicken', price: 30, img: 'images/special_chicken.jpg'}];
        let randomResult = null;
        function openRandomizer() { document.getElementById('random-modal').classList.add('active'); document.getElementById('spin-btn').classList.remove('hidden'); document.getElementById('add-random-btn').classList.add('hidden'); document.getElementById('random-name').innerText = "..."; }
        function closeRandomModal() { document.getElementById('random-modal').classList.remove('active'); }
        function spinRandomizer() { const box = document.getElementById('random-box'); box.classList.add('shuffle-anim'); document.getElementById('spin-btn').classList.add('hidden'); setTimeout(() => { box.classList.remove('shuffle-anim'); const winner = randomItems[Math.floor(Math.random() * randomItems.length)]; randomResult = winner; document.getElementById('random-img').src = winner.img; document.getElementById('random-name').innerText = translations[currentLang]['t_'+winner.key]; document.getElementById('random-price').innerText = winner.price; document.getElementById('add-random-btn').classList.remove('hidden'); }, 2000); }
        function addRandomToCart() { if(randomResult) { addToCart(translations[currentLang]['t_'+randomResult.key], randomResult.price, 1, "Random ğŸ²"); closeRandomModal(); showToast("OK!"); } }

        // Favs
        let favorites = JSON.parse(localStorage.getItem('wowFavs')) || [];
        function toggleFav(e, key) { e.stopPropagation(); const btn = e.currentTarget; if(favorites.includes(key)) { favorites = favorites.filter(i => i !== key); btn.classList.remove('active'); btn.innerHTML = '<i class="fa-regular fa-heart"></i>'; } else { favorites.push(key); btn.classList.add('active'); btn.innerHTML = '<i class="fa-solid fa-heart"></i>'; } localStorage.setItem('wowFavs', JSON.stringify(favorites)); }
        function filterFavorites() { const items = document.querySelectorAll('.menu-item'); document.getElementById('slider-section').style.display='none'; items.forEach(item => { if(favorites.includes(item.getAttribute('data-name'))) item.style.display='flex'; else item.style.display='none'; }); }
        function loadFavs() { document.querySelectorAll('.menu-item').forEach(item => { if(favorites.includes(item.getAttribute('data-name'))) { const btn = item.querySelector('.fav-btn-card'); if(btn) { btn.classList.add('active'); btn.innerHTML = '<i class="fa-solid fa-heart"></i>'; } } }); }

        // Init
        function scrollToSec(id) { const el = document.getElementById(id); const y = el.getBoundingClientRect().top + window.pageYOffset - 120; window.scrollTo({top: y, behavior: 'smooth'}); document.querySelectorAll('.cat-item').forEach(p => p.classList.remove('active')); if(id !== 'sec-offers') document.getElementById('slider-section').style.display='block'; event.currentTarget.classList.add('active'); }
        window.addEventListener('load', () => { setTimeout(() => { document.getElementById('splash').classList.add('hidden'); loadFavs(); }, 2000); });
        function showToast(msg) { const t = document.getElementById('toast'); document.getElementById('toast-msg').innerText = msg; t.classList.add('show'); setTimeout(() => t.classList.remove('show'), 2500); }
        // PWA
        let deferredPrompt; window.addEventListener('beforeinstallprompt', (e) => { e.preventDefault(); deferredPrompt = e; document.getElementById('pwa-banner').style.display = 'flex'; }); function installPWA() { document.getElementById('pwa-banner').style.display = 'none'; if (deferredPrompt) { deferredPrompt.prompt(); deferredPrompt = null; } } if ('serviceWorker' in navigator) { navigator.serviceWorker.register('sw.js'); }
    </script>

</body>
</html>
